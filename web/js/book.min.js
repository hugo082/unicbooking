$(function(){$(".appbundle_book_date").datepicker({numberOfMonths:3,showButtonPanel:!0,dateFormat:"yy-mm-dd"})}),$(function(){function t(t,i){this.t=t,this.i=i,this.s="#flightOaciModal",this._=this.s+"_cancel",this.o=this.s+"_origin",this.l=this.s+"_departure_time",this.h=this.s+"_destination",this.u=this.s+"_arrival_time",this.g=function(){var t=$(this.t).val();if(void 0!==t&&""!==t){var i=this;$.ajax({type:"GET",url:"http://"+window.location.host+"/data/api/flight",data:{flight_code:t},success:function(t){200==t.status.code?($(i.i).val(t.flight.id),i.p(t.flight)):i.m(t.status)}})}},this.p=function(t){var i=new Date(1e3*t.origin_time),e=new Date(1e3*t.destination_time);$(this.s).modal("show"),$(this.o).text("Origin : "+t.origin.name),$(this.l).text("Departure time : "+i.toLocaleTimeString()),$(this.h).text("Destination : "+t.destination.name),$(this.u).text("Arrival time : "+e.toLocaleTimeString())},this.m=function(t){alert("Error : "+t.message),$(this.t).val("")},this.I=function(){$(this.t).val("")},this.M=function(){var t=this;$(this.t).change(function(){t.g()}),$(this.s).on("click",t._,function(i){t.I()})}}new t("#appbundle_book_flight_codes_code","#appbundle_book_flight_id").M(),new t("#appbundle_book_flighttransit_codes_code","#appbundle_book_flighttransit_id").M()}),$(function(){function t(t,i,e,n){this.v=t,this.$=i,this.C=e,this.D=n,this.k=1,this.P=function(){return 30},this.R=function(){return $(this.v)},this.T=function(){return this.R().attr("data-prototype").replace(/__name__label__/g,"Catégorie n°"+(this.F+1)).replace(/__name__/g,this.F)},this.F=this.R().find("#collection_row").length,this.O=function(t,i){t.value>this.P()&&$(t).val(this.P());var e=parseInt($(t).val()),n=i?$(this.D):$(this.C);return e+parseInt(n.val())>this.P()&&n.val(this.P()-e),parseInt($(t).val())+parseInt(n.val())},this.M=function(){var t=this;$(this.C).change(function(){t.k=t.O(this,!0),t.L()}),$(this.D).change(function(){t.k=t.O(this,!1),t.L()}),t.L()},this.S=function(){var t=this.T(),i=$(t);this.R().append(i),this.F++},this.j=function(){this.R().children().last().remove(),this.F--},this.L=function(){for(;this.k>this.F;)this.S(!1);for(;this.k<this.F;)this.j(!1)}}new t("div#appbundle_book_customers","select#appbundle_book_product","#appbundle_book_adultcus","#appbundle_book_childcus").M()});