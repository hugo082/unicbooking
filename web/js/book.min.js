function CheckRequired(e){$(this).find(":input[required],select[required],textarea[required]").filter(function(){return""===this.value}).length>0&&(e.preventDefault(),alert("One or more fields required are blank"))}function getMaxB(){return 3!=$("select#appbundle_book_product").val()?999:10}function updateFlightSelection(){$("select#appbundle_book_service").val(),$("select#appbundle_book_service").val();aval=$("select#appbundle_book_airport").val(),updateFlightTransitVisibility(!0),$("#appbundle_book_flight").val("")}function updateFlightTransitVisibility(e){"TRA"!=$("select#appbundle_book_service").val()?$("#flight_transit_bloc").addClass("hidden"):($("#flight_transit_bloc").removeClass("hidden"),e&&updateFlightTransitSelection())}function updateAddressVisibily(){var e=$("select#appbundle_book_product option:selected").attr("trspt"),t=$("select#appbundle_book_service").val();e&&"TRA"!=t?($("#address").removeClass("hidden"),updateAddress()):($("#address").addClass("hidden"),$("#appbundle_book_addressdo").removeAttr("required"),$("#appbundle_book_addresspu").removeAttr("required"),$("#appbundle_book_addressdo").removeAttr("readonly"),$("#appbundle_book_addresspu").removeAttr("readonly"))}function updateAddress(){var e=$("select#appbundle_book_service").val();"ARR"==e?($("#appbundle_book_addresspu").prop("readonly","true"),$("#appbundle_book_addresspu").val("CDG Airport Terminal 1 - Gate 8"),$("#appbundle_book_addressdo").removeAttr("readonly"),$("#appbundle_book_addressdo").prop("required","required"),$("#addresse_timepu").addClass("hidden")):"DEP"==e&&($("#appbundle_book_addresspu").removeAttr("readonly"),$("#appbundle_book_addresspu").prop("required","required"),$("#appbundle_book_addressdo").val("CDG Airport Terminal 1 - Gate 28"),$("#appbundle_book_addressdo").prop("readonly","true"),$("#addresse_timepu").removeClass("hidden"))}$(function(){$("#appbundle_book_date").datepicker({numberOfMonths:3,showButtonPanel:!0,dateFormat:"yy-mm-dd"}),$("#appbundle_book_timepu").timepicker({defaultTime:!1,minuteStep:5,showMeridian:!1})}),$(document).ready(function(){$("form").on("submit",CheckRequired)}),$("select#appbundle_book_service").on("change",function(){updateFlightSelection(),updateAddressVisibily()}),$("select#appbundle_book_airport").on("change",function(){updateFlightSelection()}),$("select#appbundle_book_product").on("change",function(){updateAddressVisibily()}),$("#appbundle_book_bags").on("change",function(){var e=getMaxB();this.value>e&&$(this).val(e)}),updateAddressVisibily(),updateFlightTransitVisibility(!1),$(function(){function e(e,t){this.t=e,this.i=t,this.o="#flightOaciModal",this.s=this.o+"_cancel",this.l=this.o+"_origin",this._=this.o+"_departure_time",this.u=this.o+"_destination",this.p=this.o+"_arrival_time",this.h=function(){var e=$(this.t).val();if(void 0!==e&&""!==e){var t=this;$.ajax({type:"GET",url:"http://"+window.location.host+"/data/api/flight",data:{flight_code:e},success:function(e){200==e.status.code?($(t.i).val(e.flight.id),t.g(e.flight)):t.$(e.status)}})}},this.g=function(e){var t=new Date(1e3*e.origin_time),i=new Date(1e3*e.destination_time);$(this.o).modal("show"),$(this.l).text("Origin : "+e.origin.name),$(this._).text("Departure time : "+t.toLocaleTimeString()),$(this.u).text("Destination : "+e.destination.name),$(this.p).text("Arrival time : "+i.toLocaleTimeString())},this.$=function(e){alert("Error : "+e.message),$(this.t).val("")},this.v=function(){$(this.t).val("")},this.m=function(){var e=this;$(this.t).change(function(){e.h()}),$(this.o).on("click",e.s,function(t){e.v()})}}new e("#appbundle_book_flight_codes_code","#appbundle_book_flight_id").m(),new e("#appbundle_book_flighttransit_codes_code","#appbundle_book_flighttransit_id").m()}),$(function(){function e(e,t,i,n){this.k=e,this.M=t,this.I=i,this.C=n,this.A=1,this.D=function(){return 30},this.R=function(){return $(this.k)},this.T=function(){return this.R().attr("data-prototype").replace(/__name__label__/g,"Catégorie n°"+(this.q+1)).replace(/__name__/g,this.q)},this.q=this.R().find("#collection_row").length,this.F=function(e,t){e.value>this.D()&&$(e).val(this.D());var i=parseInt($(e).val()),n=t?$(this.C):$(this.I);return i+parseInt(n.val())>this.D()&&n.val(this.D()-i),parseInt($(e).val())+parseInt(n.val())},this.m=function(){var e=this;$(this.I).change(function(){e.A=e.F(this,!0),e.P()}),$(this.C).change(function(){e.A=e.F(this,!1),e.P()}),e.P()},this.S=function(){var e=this.T(),t=$(e);this.R().append(t),this.q++},this.V=function(){this.R().children().last().remove(),this.q--},this.P=function(){for(;this.A>this.q;)this.S(!1);for(;this.A<this.q;)this.V(!1)}}new e("div#appbundle_book_customers","select#appbundle_book_product","#appbundle_book_adultcus","#appbundle_book_childcus").m()});