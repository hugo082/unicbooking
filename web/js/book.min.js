$(function(){function t(t,i,e,n){this.loading=!1,this.t=t,this.i=i,this.o=e,this.l=n,this.s="#flightModalInformation",this.h=this.s+"_cancel",this._=this.s+"_origin",this.u=this.s+"_departure_time",this.p=this.s+"_destination",this.g=this.s+"_arrival_time",this.isDisable=function(t){t?$(this.l).attr("disabled","disabled"):$(this.l).removeAttr("disabled"),$(this.t).prop("disabled",t)},this.reload=function(){this.v()},this.v=function(){var t=$(this.t).val(),i=$(this.i).val();if(!this.loading&&void 0!==t&&""!==t){var e=this;this.loading=!0,this.isDisable(!0),$.ajax({type:"GET",url:"http://"+window.location.host+"/api/flight",headers:{Authorization:"Bearer "+window.token},data:{flight_code:t,flight_type:i},success:function(t){e.loading=!1,e.isDisable(!1),200===t.status.code?($(e.o).val(t.flight.id),e.I(t.flight)):e.$(t.status)}})}},this.I=function(t){var i=new Date(1e3*t.departure_time),e=new Date(1e3*t.arrival_time);$(this.s).modal("show"),$(this._).text("Origin : "+t.origin.name),$(this.u).text("Departure time : "+i.toLocaleTimeString()),$(this.p).text("Destination : "+t.destination.name),$(this.g).text("Arrival time : "+e.toLocaleTimeString())},this.$=function(t){alert("Error : "+t.message),$(this.t).val("")},this.m=function(){$(this.t).val(""),$(this.o).val("")},this.M=function(){var t=this;$(this.t).change(function(){t.v()}),$(this.l).click(function(){t.v()}),$(this.s).on("click",t.h,function(i){t.m()})}}function i(){this.fields=[],this.addField=function(i,e,n){var o=new t(i,e,n);return o.M(),this.fields.push(o),o},this.S=function(){for(var t=0,i="#booking_appbundle_book_products_";1===$(i+t).length&&t<10;){var e=i+t+"_airport_flight_";this.addField(e+"number",e+"id"),this.addField(e+"transit_number",e+"transit_id"),t+=1}}}window.apiChecker=new i,window.apiChecker.S()}),$(function(){function t(t){this.D=t,this.T=[],this.k=function(){return $(this.D)},this.A=function(t,i){return $(t).find(":selected").attr(i)},this.F=function(t){var i=$(t).attr("c-ids");return void 0!==i?i.split("-"):[]},this.pushProductTypeSelector=function(t){this.T.push(t),this.P(this.A(this,"c-id"),t)},this.removeProductTypeSelector=function(t){this.T.remove(t)},this.B=function(t){var i=this;this.T.forEach(function(e){i.P(t,e)})},this.P=function(t,i){var e=this;$(i+" option").each(function(){var i=null;e.F(this).forEach(function(e){i=null!==i&&i||e===t}),null===i||i?$(this).prop("disabled",!1):$(this).prop("disabled",!0)})},this.M=function(){var t=this;$(this.D).change(function(){t.B(t.A(this,"c-id"))})}}Array.prototype.remove=function(){for(var t,i,e=arguments,n=e.length;n&&this.length;)for(t=e[--n];-1!==(i=this.indexOf(t));)this.splice(i,1);return this},window.productsManager=new t("select#booking_appbundle_book_client"),window.productsManager.M()});
