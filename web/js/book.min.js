$(function(){function t(t,i,e){this.loading=!1,this.t=t,this.i=i,this.o=e,this.l="#flightModalInformation",this.s=this.l+"_cancel",this.h=this.l+"_origin",this._=this.l+"_departure_time",this.u=this.l+"_destination",this.p=this.l+"_arrival_time",this.isDisable=function(t){t?$(this.o).attr("disabled","disabled"):$(this.o).removeAttr("disabled"),$(this.t).prop("disabled",t)},this.reload=function(){this.g()},this.g=function(){var t=$(this.t).val();if(!this.loading&&void 0!==t&&""!==t){var i=this;this.loading=!0,this.isDisable(!0),$.ajax({type:"GET",url:"http://"+window.location.host+"/api/flight",headers:{Authorization:"Bearer "+window.token},data:{flight_code:t},success:function(t){i.loading=!1,i.isDisable(!1),200===t.status.code?($(i.i).val(t.flight.id),i.v(t.flight)):i.$(t.status)}})}},this.v=function(t){var i=new Date(1e3*t.departure_time),e=new Date(1e3*t.arrival_time);$(this.l).modal("show"),$(this.h).text("Origin : "+t.origin.name),$(this._).text("Departure time : "+i.toLocaleTimeString()),$(this.u).text("Destination : "+t.destination.name),$(this.p).text("Arrival time : "+e.toLocaleTimeString())},this.$=function(t){alert("Error : "+t.message),$(this.t).val("")},this.I=function(){$(this.t).val(""),$(this.i).val("")},this.m=function(){var t=this;$(this.t).change(function(){t.g()}),$(this.o).click(function(){t.g()}),$(this.l).on("click",t.s,function(i){t.I()})}}function i(){this.fields=[],this.addField=function(i,e,n){var o=new t(i,e,n);return o.m(),this.fields.push(o),o},this.M=function(){for(var t=0,i="#booking_appbundle_book_products_";1===$(i+t).length&&t<10;){var e=i+t+"_airport_flight_";this.addField(e+"number",e+"id"),this.addField(e+"transit_number",e+"transit_id"),t+=1}}}window.apiChecker=new i,window.apiChecker.M()}),$(function(){function t(t){this.S=t,this.D=[],this.T=function(){return $(this.S)},this.k=function(t,i){return $(t).find(":selected").attr(i)},this.A=function(t){var i=$(t).attr("c-ids");return void 0!==i?i.split("-"):[]},this.pushProductTypeSelector=function(t){this.D.push(t),this.F(this.k(this,"c-id"),t)},this.removeProductTypeSelector=function(t){this.D.remove(t)},this.P=function(t){var i=this;this.D.forEach(function(e){i.F(t,e)})},this.F=function(t,i){var e=this;$(i+" option").each(function(){var i=null;e.A(this).forEach(function(e){i=null!==i&&i||e===t}),null===i||i?$(this).prop("disabled",!1):$(this).prop("disabled",!0)})},this.m=function(){var t=this;$(this.S).change(function(){t.P(t.k(this,"c-id"))})}}Array.prototype.remove=function(){for(var t,i,e=arguments,n=e.length;n&&this.length;)for(t=e[--n];-1!==(i=this.indexOf(t));)this.splice(i,1);return this},window.productsManager=new t("select#booking_appbundle_book_client"),window.productsManager.m()});
